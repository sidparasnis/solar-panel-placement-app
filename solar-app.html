<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Display a map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
    <style>
    #fit {
        display: block;
        position: relative;
        margin: 0px auto;
        width: 50%;
        height: 59px;
        padding: 10px;
        border: none;
        border-radius: 3px;
        font-size: 12px;
        text-align: center;
        color: #fff;
        background: #ee8a65;
    }
</style>
</head>
<body>
  <div id='map'></div>
  <br/>
<div id='fit'>
  <input type="text" class="form-control" id="param">
  <span class="input-group-btn" >
    <button class="btn btn-default" type="button" onClick="httpGetAsync(document.getElementById('param').value, moveMap);">Go!</button>
  </span>
</div>
<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoic2lkcGFyYXNuaXMiLCJhIjoiY2pkdzRmOTlhMzhjZDJ3cXBicDg5Nm5vdCJ9.OApZWKBcLKHOTUraZUAsBw';
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: 'mapbox://styles/mapbox/light-v9', // stylesheet location
    center: [-74.50, 40], // starting position [lng, lat]
    zoom: 9 // starting zoom
});

function moveMap(res) {
  //console.log(term)
  var resJSON = JSON.parse(res);
  console.log(resJSON);
  var latlng = [resJSON.results[0].geometry.location.lat, resJSON.results[0].geometry.location.lng];
  console.log(latlng)
  map.flyTo({center: latlng});
};

function httpGetAsync(term, cb)
{
    var theUrl = "https://maps.googleapis.com/maps/api/geocode/json?address=" + term + "&key=AIzaSyB_L9c5d5kZyo3B1OQ-e020RYGaGSQWNRY"
    console.log(theUrl);
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            cb(xmlHttp.responseText);
    }
    xmlHttp.open("GET", theUrl, true); // true for asynchronous
    xmlHttp.send(null);
}
</script>

</body>
</html>
